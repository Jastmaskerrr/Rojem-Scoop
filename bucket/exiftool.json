{
    "version": "13.50",
    "description": "A command-line application for reading, writing and editing meta information in a wide variety of files.",
    "homepage": "https://exiftool.org",
    "license": "GPL-1.0-or-later|Artistic-1.0-Perl",
    "suggest": {
        "Total Commander Plugin Host": "extras/totalcommander"
    },
    "notes": "If Total Commander is detected, this package automatically copies the ExifTool executable to 'plugins\\Wlx\\ExifToolView'. This serves as the required backend binary for the ExifToolView Lister plugin to function correctly.",
    "architecture": {
        "64bit": {
            "url": "https://exiftool.org/exiftool-13.50_64.zip",
            "hash": "40f10e6edabeef14b4585a747672691dd708d4455eb8e097256e439709806e8d",
            "extract_dir": "exiftool-13.50_64"
        },
        "32bit": {
            "url": "https://exiftool.org/exiftool-13.50_32.zip",
            "hash": "313e3ea4f4114f7f5681bc914411ae3414f051633754c53596b738f79a223785",
            "extract_dir": "exiftool-13.50_32"
        }
    },
    "pre_install": "Copy-Item \"$dir\\exiftool(-k).exe\" \"$dir\\exiftool.exe\"",
    "installer": {
        "script": [
            "$TCDir = $(appdir totalcommander $global)",
            "",
            "if ($TCDir -and (Test-Path \"$TCDir\\current\")) {",
            "    Write-Host \"Found Total Commander, integrating ExifTool...\" -ForegroundColor Cyan",
            "    ",
            "    $PluginDir = \"$TCDir\\current\\plugins\\Wlx\\ExifToolView\"",
            "    if (!(Test-Path \"$PluginDir\")) { New-Item \"$PluginDir\" -ItemType Directory -Force | Out-Null }",
            "    ",
            "    Copy-Item \"$dir\\*\" \"$PluginDir\" -Recurse -Force -Exclude \"readme.txt\"",
            "    Write-Host \"ExifTool copied to: $PluginDir\" -ForegroundColor Green",
            "} else {",
            "    Write-Host \"Total Commander (Scoop) not found. Skipped plugin integration.\" -ForegroundColor Yellow",
            "}"
        ]
    },
    "bin": [
        "exiftool.exe",
        "exiftool(-k).exe"
    ],
    "checkver": {
        "url": "https://exiftool.org/ver.txt",
        "regex": "([\\d.]+)"
    },
    "autoupdate": {
        "architecture": {
            "64bit": {
                "url": "https://exiftool.org/exiftool-$version_64.zip",
                "extract_dir": "exiftool-$version_64"
            },
            "32bit": {
                "url": "https://exiftool.org/exiftool-$version_32.zip",
                "extract_dir": "exiftool-$version_32"
            }
        },
        "hash": {
            "url": "$baseurl/checksums.txt",
            "regex": "$basename.*?$sha256"
        }
    }
}
